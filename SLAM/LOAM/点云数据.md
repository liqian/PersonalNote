

# bag 格式
在ROS中使用bag包来记录运行过程中各个topic中的message.

1. 对于这些message，我们可以使用
```
rosbag play *.bag
```
的方式进行播放.

但如果要截取bag包中的某一些数据，并逐一对其进行处理，那么我们就需要的bag进行解析。

2. ros中的点云文件为PointCloud2，我们将一个用velodyne64线雷达采集的bag包中的点云文件转换为我们能够使用pcl_viewer直接显示的pcd点云文件。

2.1. 查看bag文件的信息，输入以下命令：
```
rosbag info *.bag
```

就可以显示bag包中记录的话题及其记录的消息的类型。
```
path:        nsh_indoor_outdoor.bag
version:     2.0
duration:    1:27s (87s)
start:       Jan 25 2015 05:03:08.51 (1422133388.51)
end:         Jan 25 2015 05:04:36.06 (1422133476.06)
size:        721.2 MB
messages:    869
compression: none [869/869 chunks]
types:       sensor_msgs/PointCloud2 [1158d486dd51d683ce2f1be655c3c181]
topics:      /velodyne_points   869 msgs    : sensor_msgs/PointCloud2

```
上面的信息显示，在这个bag包中我们记录很多topic的数据以及这些topic的消息类型，以及对应的有多少帧消息。

ros中自带将bag包中点云文件解析的工具, 输入以下命令： 
```
rosrun pcl_ros bag_to_pcd 3.bag /velodyne_points pcd
```

解析后按照每一帧的数据进行存储为*.pcd数据

然后就可以用pcl_viewer工具进行查看了。
